# File Introduction
    ├── PULP-Lite Ccode
    │   ├── Ccode                        // The C code of CNN, KNN, LR, LSBoost, SVM and NB
    │   ├── download                     // C code generation file. If C code compilation fails, you can download the file from the folder download to PULP-Lite
    │   ├── experimental data            // The experimental data of CNN, KNN, LR, LSBoost, SVM and NB
    │   └── readme.md
    ├── PULP-Lite FPGA
    │   ├── readme.md 
    │   ├── vivado2020.2Project          // the FPGA project of PULP-Lite based on vivado2020.2.
    │   └── vivado_Bitstream             // If it is failed to restore the project, you can download the Bitstream in the folder vivado_Bitstream.


# Operation process

    1, Choose the interconnection of PULP Lite
    2, Restore the FPGA project        // If it is failed to restore the project, you can download the Bitstream in the folder PULP-Lite FPGA\vivado_Bitstream.
    3, Prepare a computer that meets the requirements for compiling C code
    4, Modify PULP-Lite Ccode\Ccode\CNNMnist_v2\BUILD\file_c\debug.h to generate different code.
    5, Compile C code                  // If C code compilation fails, you can download the file from the folder PULP-Lite Ccode\download to PULP-Lite
    6, Change the value of FPGA boot pin into boot mode
    7, Connect the Uart pin to the PC
    8, Download experimental program



# 1. Choose Interconnection of PULP-Lite

Modify the value of  MUT_IMP in PULP-Lite FPGA\vivado2020.2Project\RTL\noc\defaults.svh to Select the interconnection structure of PULP-Lite 

    `define MUT_IMPL 0      // xbar
    `define MUT_IMPL 0      // bfly2
    `define MUT_IMPL 0      // bfly4
    `define MUT_IMPL 0      // clos_m2n
    `define MUT_IMPL 0      // clos_m1n
    `define MUT_IMPL 0      // clos_m0p5n

# 2. Restore the FPGA project
To restore the project, follow the steps below on Vivado2020.2.
The FPGA is xcku060-ffva1156-2-i.
   
    ​1， Click  Tools ---> Run Tcl Scripts
    2， Select fpga_simtest.tcl  //  if recovery is not possible, it is necessary to determine whether the path to the source code file in the cl file is correct.
    3， Modify the value of  MUT_IMP in defaults.svh to Select the interconnection structure of PULP-Lite. 
    4， Click  Generate Bitstream
    5， Download BitStream to FPGA

# 3. Prepare a computer that meets the requirements for compiling C code
    1. Linux
    2. riscv-gcc
    3. python3

# 4. Modify PULP-Lite Ccode\Ccode\CNNMnist_v2\BUILD\file_c\debug.h to generate different code

    #define CORE_NUM 1          // CPU0 excute all code
    #define CORE_NUM 8          // CPU0-7 excute all code

    #define CORE17_IRQ          // CPU1-7 queries tasks through interrupts
    // #define CORE17_IRQ       // CPU1-7 queries tasks through round-robin

    #define NOC_ADDR_TR 1       // enable address translation
    #define NOC_ADDR_TR 2       // disable address translation


# 5. Compile C code
    make EXhex user_code


# 6. Boot mode

change the value of boot pin into boot mode or user mode

    boot mode   :         Set FPGA boot pin to 0
    user mode   :         Set FPGA boot pin to 1

# 7. Connect the Uart pin to the PC
    set_property PACKAGE_PIN AK31 [get_ports uart_tx]
    set_property PACKAGE_PIN AK32 [get_ports uart_rx]

# 8. Download experimental program 
    Download the machine code of the program generated by compiling C code to FPGA through serial port. 
    Serial port baud rate is 115200.
    Send mem_user.dat first, then rodata_user.dat.